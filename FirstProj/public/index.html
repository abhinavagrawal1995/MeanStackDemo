<html>
<title>
    Mittens Trial
</title>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
        crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script>
    <script type="text/javascript">
        var app = angular.module("mittens", ['ngRoute']);

        app.config(function ($routeProvider, $locationProvider) {
            $routeProvider
                .when('/', {
                    templateUrl: 'home.html',
                    controller: 'HomeController'
                })
                .when('/signup', {
                    templateUrl: 'signup.html',
                    controller: 'SignupController'
                })
        });

        app.controller('HomeController', function ($scope, $http) {
            //Get Server Data
            getServerData();

            function getServerData() {
                $http({
                    method: "GET",
                    url: '\meows'
                }).then(function successCallback(response) {
                    $scope.displayData = response.data;
                }, function errorCallback(response) {
                    alert("trouble..");
                });
            }

            //Remove Data
            $scope.removeDisplayData = function (removeItem) {
                //console.log(removeItem);
                $http({
                    method: "PUT",
                    url: "/meows/remove",
                    data: { item: removeItem }
                }).then(function successCallback(response) {
                    getServerData();
                }, function errorCallback(response) {
                    alert("trouble Deleting..");
                });
            }

            //SignIn
            $scope.signIn = function () {

                var signIndata = {
                    uname: $scope.Uname,
                    upass: $scope.Password
                };

                $http({
                    method: "PUT",
                    url: '/users/signin',
                    data: { userSignIn: signIndata }
                }).then(function () {
                    alert("Success");
                    //getServerData();
                }, function (err) {
                    alert("Invalid Credentials!.");
                });
            }

        });//Controller

        app.controller('SignupController', function ($scope, $http) {

            //SignUP
            $scope.signUp = function () {

                var signUpdata = {
                    uname: $scope.signUpUserName,
                    upass: $scope.signUpPassword
                };

                $http({
                    method: "POST",
                    url: '/users',
                    data: { userData: signUpdata }
                }).then(function (response) {
                    alert("Signed Up Successful");
                }, function (response) {
                    alert("trouble signing up..");
                });
            }
        });
    </script>
</head>

<body class="container" ng-app="mittens">
    <h1><a href="#!">Mittens</a></h1>
    <div ng-view></div>
</body>

</html>